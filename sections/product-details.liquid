<section class="flex flex-wrap w-full ">  

  <div class="flex-1 pl-3 pr-3 md:pr-0">


      <div class="hidden grid-cols-2 gap-3 md:grid">
        {% assign images = product.media | where: "media_type", "image" %} 
        {% for image in product.images %}

        <div>{% render 'img-square', img:image%}</div>
 
        {% endfor %}
      </div>
  </div>

  <div class="self-start w-full px-3 md:pt-3 md:sticky md:top-0 md:max-w-cart ">

  <div class="brand-b-border pb-7 font-3 text-2 tracking-2 ">
  <h1 class="mb-3 uppercase tracking-2 ">{{product.title }}</h1>
  <h2 id="price" class="">{{ product.price | money }}</h2>
  </div>

  <div class="pt-3 font-1 text-4">
 {{ product.description }}
  </div>
<div class="mt-7 ">
  {% for variant in product.variants %}

   <div class="hidden var-thumb">
  
    {% assign vImg = variant.image %}
    {% if vImg %}
      {% assign vImg = variant.image.src %}
    {% else %}
      {% assign images = product.media  %}
      {% assign vImg = images[0].src %}
    {% endif %}
    {% render 'img-thumb', img:vImg %}
      </div>
  {% endfor %}

</div>

<div class="flex flex-wrap w-full py-3">
Select &nbsp; <span class="inline-block lowercase"> {{ product.options[0] }}</span>	<a href="{%- if section.settings.page-link != blank -%} {{ section.settings.page-link.url }} {% else %} /pages/eye-test {% endif %}" class= "ml-auto transition duration-300 text-tint3 hover:text-tint1 ">{%- if section.settings.page-text != blank -%}
{{ section.settings.page-text }}{% else %}Take a test{% endif %}</a>
</div>

<div class="flex flex-wrap">
  {% for variant in product.variants %}
    <button x-data="varbtns()" @click="set" @mouseenter="over"  @mouseleave="out" data-value="{{ variant.title }}" data-index="{{forloop.index0}}" data-id="{{ variant.id }}" data-color="{{ variant.metafields.custom.color }}"  class="transiton duration-300 mr-1 px-2 h-[30px] w-[50px] font-3 border rounded-full var-btn border-tint3"> {{ variant.title }}</button>
  {% endfor %}

  <a  href="{%- if section.settings.page-link != blank -%} {{ section.settings.page-link.url }} {% else %} /pages/eye-test {% endif %}" class="ml-auto px-2 h-[30px] w-[45px] block flex justify-center items-center border rounded-full  border-tint3 hover:bg-tint1 hover:text-tint2 duration-300 ease-in-out hover:border-tint1">?</a>

  

</div>
  
{% if product.available == false %}
<span class="block pt-1 text-tint5">Sold out</span> 
{% else %}

 <form action="/cart/add" method="post" enctype="multipart/form-data"  
  id="add-to-cart-{{ product.handle }}-{{ collection.handle }}-{{ section.id }}">

{% render 'product-options' %}

    <div class="flex mt-6">
       <input class="hidden" type="text" id="Quantity" name="quantity" value="1" min="1"/>

       {% if product.variants.size == 1 %}
        {% if product.variants.first.inventory_quantity == 0 %}
   
          <button  disabled class="hidden w-full py-2 uppercase bg-tint4 text-tint4 font-1" >SOLD OUT</button>
        {% else %}

        {% render 'product-add' %}
       {% endif %}

        {% else %}
      {% render 'product-add' %}
  {% endif %}

    </div>         
    {% assign current_variant = product.selected_or_first_available_variant %}
</form>

{% endif %}

<div x-data="{ active: false }" class="border-t border-tint3 mt-7">
    {% for block in section.blocks %}

 <div class="border-b border-tint3" x-data="{
        id: {{forloop.index0}},
        get expanded() {
            return this.active === this.id
        },
        set expanded(value) {
            this.active = value ? this.id : null
        },
    }" role="region" class="">
        <h2>
            <button
                x-on:click="expanded = !expanded"
                :aria-expanded="expanded"
                class="flex items-center justify-between w-full py-3 "
            >
                <span> {{ block.settings.title }}</span>
             
            </button>
        </h2>

        <div x-show="expanded" x-collapse class="">
            <div class="pb-4 text-4">
                    {{ block.settings.text }}
            </div>
        </div>
    </div>


 {% endfor %}

   


   
 </section>


{% schema %}
{
    "name": "Product details",
    "max_blocks": 10,
    "blocks": [
    {
      "name": "Row",
      "type": "gallery",
      "settings": [
      {
          "id": "title",
          "type": "text",
          "label": "Title"
        },
        {
          "id": "text",
          "type": "richtext",
          "label": "Text"
        }
      ]
    }
  ],
  "settings": [
      {
        "id": "page-link",
        "type": "page",
        "label": "Page",
        "info": "(shown next to options)"
      },
         {
        "id": "page-text",
        "type": "text",
        "label": "Text for link"
      }
    ]
}

{% endschema %}  